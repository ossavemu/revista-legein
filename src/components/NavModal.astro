---
import { MESSAGES, PATHS } from '@/constants'
---

<dialog>
  <nav
    class="p-1 rounded-md flex items-center justify-center text-center bg-cyan-50 bg-opacity-50 dark:bg-black dark:bg-opacity-90 -z-10"
  >
    <div
      class="absolute inset-0 bg-transparent dark:bg-fuchsia-400 dark:bg-[size:20px_20px] dark:opacity-20 dark:blur-[100px]"
    >
    </div>
    <form method="dialog" class="p-4 z-10">
      <ul class="w-full p-2">
        {
          Object.values(MESSAGES).map((message, index) => (
            <li class="border-2  dark:border-gray-500 border-gray-600 p-1 m-1 hover:scale-105  duration-300 ease-in-out">
              <a href={Object.values(PATHS)[index] ?? '#'} class="text-lg">
                {message}
              </a>
            </li>
          ))
        }
      </ul>
      <button class="text-amber-600">CERRAR</button>
    </form>
  </nav>

  <style>
    dialog {
      position: fixed;
      background: transparent;
      top: 0%;
      left: 50%;
      transform: translate(-50%, -75%);
    }

    dialog::backdrop {
      backdrop-filter: blur(4px);
    }
  </style>
  <script>
    const modal = document.querySelector('dialog')

    const button = document.getElementById('mobile-menu-button')

    if (!(modal === null || button === null)) {
      button.addEventListener('click', () => {
        modal.showModal()
      })
      document.addEventListener('astro:after-swap', () => {
        modal.close()
      })

      modal.addEventListener('click', (event) => {
        if (event.target === modal) {
          modal.close()
        }
      })
    }
  </script>
</dialog>
